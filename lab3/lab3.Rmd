---
title: "lab3"
author: "Мухтаров Андрей"
date: '26 ноября 2016 г '
output: html_document
---


## R Markdown

##Задание 1
Используйте команду readLines для загрузки файла в текстовый вектор html.
```{r}
data<-readLines("https://raw.githubusercontent.com/SergeyMirvoda/da2016/master/data/forbes.htm", warn=FALSE)
length(data)
sum(nchar(data))

```
Билл Гейтсе72 и Ларри Эллисон 41

#Напишите шаблон регулярного выражения
```{r}
shab <- "[$](\\d{1,2}[,]?\\d?)\\s"
p<-grep(shab,data)
length(p)
```
```{r}
list<-regexpr(shab,data)
table<-regmatches(data,list)
```

Должно быть ровно сто значений.
```{r}
length(table)
```

Самый большой доход должен быть доход Билла Гейтса
```{r}
table[1]
```

Такой доход должен быть в списке один раз.
```{r}
length(table[table=="$72 "])
```

В всписке должна быть цифра, которую мы запомнили для Ларри Эллисона.
```{r}
table[3]
```

Должно быть как минимум два значения, встречающихся несколько раз.
```{r}
length(table[table=="$36 "])
length(table[table=="$4,6 "])
```
##Задание 2
В данных доход представлен в формате "$42 B", что означает 42 ?? 10^9. Преобразуйте этот формат в числовой и сохраните в вектор worths. Удостоверьтесь в следующем:
```{r}
n<-substr(table,2,nchar(table))
n2<-sub(",",".",n)
worths<-as.numeric(n2)*10**9
```
worths является вектором и в нём сто занчений типа double.
```{r}
typeof(worths)
length(worths)
```

Все элементы вектора worths больше 1 миллиарда.
```{r}
length(worths[worths>=10**9])
```

Самое большое число это доход Билла Гейтса.
```{r}
max(worths)
```
Какова медиана ста этих записей?
```{r}
median(worths)
```

Средний доход?
```{r}
mean(worths)
```

Как много людей из этого списка имеют доход больше 5млрд., 10, 25?
```{r}
length(worths[worths>5*10**9])
length(worths[worths>10*10**9])
length(worths[worths>25*10**9])
```

Какой их общий доход?
```{r}
sum(worths)
```

Какую долю от общего дохода, составляет пятёрка самых богатых.
```{r}
sum(worths[1:5])*100/sum(worths)
```

Какую долю от общего дохода, составляют 20 самых богатых.
```{r}
sum(worths[1:20])*100/sum(worths)
```

В данных федерального резерва США найдите показатель дохода всех домохозяйств (Household net worth) в соответвующем году, какую долю общего дохода составляют 100 богатейших людей.
```{r}
Hnw<-79.383*10**9
100*Hnw/sum(worths)
```
